<?php

/**
 *
 * @file
 * Primary module hooks for storizborn_surcharger module.
 *
 * @DCG
 * This file is no longer required in Drupal 8.
 * @see https://www.drupal.org/node/2217931
 */

/**
 * implement hook_preprocess_HOOK
 */
function storizborn_surcharger_preprocess_block__aggregator(&$vars) {
  if (isset($vars['base_plugin_id']) && $vars['base_plugin_id'] == 'aggregator_feed_block') {
    $vars['content']['list']['#theme'] = 'storizborn_surcharger_aggregator';
  }
  
  // dump($vars);
}

/**
 * implement hook_preprocess_container
 */
function storizborn_surcharger_preprocess_container(&$vars) {
  if (isset($vars['theme_hook_original']) && $vars['theme_hook_original'] == 'container' && isset($vars['attributes']['class']) && is_array($vars['attributes']['class'])) {
    array_push($vars['attributes']['class'], 'container');
  }
  //dump(\Drupal::routeMatch()->getRouteName());
}

/**
 * implement template_preprocess_book_navigation() for navigation
 */
/*
 * function storizborn_surcharger_preprocess_book_navigation($vars)
 * {
 * dump($vars);
 * return [
 * '#theme'=>'storizborn_surcharger_bn',
 * 'element' => []
 * ];
 * }
 */

/**
 * implements hook_theme()
 */
function storizborn_surcharger_theme() {
  // pre-formatage pour les flux rss
  $hooks['storizborn_surcharger_aggregator'] = [
    'render element' => 'element',
    'preprocess functions' => [
      'template_preprocess_storizborn_surcharger_aggregator'
    ],
    'file' => 'storizborn_surcharger.theme.inc'
  ];
  $hooks['storizborn_surcharger_bn'] = [
    'render element' => 'element',
    'preprocess functions' => [
      'template_preprocess_storizborn_surcharger_bn'
    ],
    'file' => 'storizborn_surcharger.theme.inc'
  ];
  return $hooks;
}